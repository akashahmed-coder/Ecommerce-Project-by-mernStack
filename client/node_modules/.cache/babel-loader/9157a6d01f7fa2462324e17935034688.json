{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{createContext,useState,useEffect}from'react';import ProductsApi from'./api/ProductsApi';import UserApi from'./api/UserApi';import axios from'axios';import CategoryApi from'./api/CategoryApi';import{jsx as _jsx}from\"react/jsx-runtime\";export var GlobleState=/*#__PURE__*/createContext();export var DataProvider=function DataProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];useEffect(function(){var refreshToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/user/refresh_token');case 2:token=_context.sent;setToken(token.data.accessToken);case 4:case\"end\":return _context.stop();}}},_callee);}));return function refreshToken(){return _ref2.apply(this,arguments);};}();refreshToken();},[]);var state={token:[token,setToken],productsAPI:ProductsApi(),userApi:UserApi(token),categoryApi:CategoryApi(token)};return/*#__PURE__*/_jsx(GlobleState.Provider,{value:state,children:children});};","map":{"version":3,"sources":["C:/Users/Editor/Desktop/Ecommers/client/src/GlobleState.js"],"names":["React","createContext","useState","useEffect","ProductsApi","UserApi","axios","CategoryApi","GlobleState","DataProvider","children","token","setToken","refreshToken","get","data","accessToken","state","productsAPI","userApi","categoryApi"],"mappings":"0ZACA,MAAQA,CAAAA,KAAR,EAAgBC,aAAhB,CAAgCC,QAAhC,CAAyCC,SAAzC,KAA0D,OAA1D,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGP,aAAa,EAAjC,CAEP,MAAO,IAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAc,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACvC,cAAyBR,QAAQ,CAAC,KAAD,CAAjC,wCAAOS,KAAP,eAAaC,QAAb,eAGAT,SAAS,CAAC,UAAI,CACb,GAAMU,CAAAA,YAAY,2FAAG,mKACCP,CAAAA,KAAK,CAACQ,GAAN,CAAU,qBAAV,CADD,QACbH,KADa,eAEpBC,QAAQ,CAACD,KAAK,CAACI,IAAN,CAAWC,WAAZ,CAAR,CAFoB,sDAAH,kBAAZH,CAAAA,YAAY,2CAAlB,CAICA,YAAY,GACb,CANQ,CAMP,EANO,CAAT,CAOA,GAAMI,CAAAA,KAAK,CAAG,CACZN,KAAK,CAAC,CAACA,KAAD,CAAOC,QAAP,CADM,CAEZM,WAAW,CAACd,WAAW,EAFX,CAGZe,OAAO,CAACd,OAAO,CAACM,KAAD,CAHH,CAIZS,WAAW,CAACb,WAAW,CAACI,KAAD,CAJX,CAAd,CAMH,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEM,KAA7B,UACKP,QADL,EADF,CAKC,CAtBM","sourcesContent":["\r\nimport  React,{ createContext , useState,useEffect } from 'react';\r\nimport ProductsApi from './api/ProductsApi';\r\nimport UserApi from './api/UserApi';\r\nimport axios from 'axios'\r\nimport CategoryApi from './api/CategoryApi';\r\n\r\nexport const GlobleState = createContext()\r\n\r\nexport const DataProvider = ({children})=>{\r\n   const [token,setToken] = useState(false)\r\n   \r\n\r\n   useEffect(()=>{\r\n    const refreshToken = async () => {\r\n      const token = await axios.get('/user/refresh_token')\r\n     setToken(token.data.accessToken)\r\n    }\r\n     refreshToken()\r\n   },[])\r\n   const state = {\r\n     token:[token,setToken],\r\n     productsAPI:ProductsApi(),\r\n     userApi:UserApi(token),\r\n     categoryApi:CategoryApi(token)\r\n   }\r\nreturn(\r\n  <GlobleState.Provider value={state}>\r\n      {children}\r\n  </GlobleState.Provider>\r\n)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}