{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{createContext,useState,useEffect}from'react';import ProductsApi from'./api/ProductsApi';import UserApi from'./api/UserApi';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export var GlobleState=/*#__PURE__*/createContext();export var DataProvider=function DataProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var refreshToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/user/refresh_token');case 2:token=_context.sent;setToken(token.data.accessToken);case 4:case\"end\":return _context.stop();}}},_callee);}));return function refreshToken(){return _ref2.apply(this,arguments);};}();useEffect(function(){var firstLogin=localStorage.getItem('firstLogin');if(firstLogin)refreshToken();},[]);var state={token:[token,setToken],productsAPI:ProductsApi(),userApi:UserApi(token)};return/*#__PURE__*/_jsx(GlobleState.Provider,{value:state,children:children});};","map":{"version":3,"sources":["C:/Users/Editor/Desktop/Ecommers/client/src/GlobleState.js"],"names":["React","createContext","useState","useEffect","ProductsApi","UserApi","axios","GlobleState","DataProvider","children","token","setToken","refreshToken","get","data","accessToken","firstLogin","localStorage","getItem","state","productsAPI","userApi"],"mappings":"0ZACA,MAAQA,CAAAA,KAAR,EAAgBC,aAAhB,CAAgCC,QAAhC,CAAyCC,SAAzC,KAA0D,OAA1D,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGN,aAAa,EAAjC,CAEP,MAAO,IAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAc,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACvC,cAAyBP,QAAQ,CAAC,KAAD,CAAjC,wCAAOQ,KAAP,eAAaC,QAAb,eAEA,GAAMC,CAAAA,YAAY,2FAAG,mKACCN,CAAAA,KAAK,CAACO,GAAN,CAAU,qBAAV,CADD,QACbH,KADa,eAEpBC,QAAQ,CAACD,KAAK,CAACI,IAAN,CAAWC,WAAZ,CAAR,CAFoB,sDAAH,kBAAZH,CAAAA,YAAY,2CAAlB,CAIAT,SAAS,CAAC,UAAI,CACZ,GAAMa,CAAAA,UAAU,CAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB,CACA,GAAGF,UAAH,CAAcJ,YAAY,GAC3B,CAHQ,CAGP,EAHO,CAAT,CAIA,GAAMO,CAAAA,KAAK,CAAG,CACZT,KAAK,CAAC,CAACA,KAAD,CAAOC,QAAP,CADM,CAEZS,WAAW,CAAChB,WAAW,EAFX,CAGZiB,OAAO,CAAChB,OAAO,CAACK,KAAD,CAHH,CAAd,CAKH,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAES,KAA7B,UACKV,QADL,EADF,CAKC,CArBM","sourcesContent":["\r\nimport  React,{ createContext , useState,useEffect } from 'react';\r\nimport ProductsApi from './api/ProductsApi';\r\nimport UserApi from './api/UserApi';\r\nimport axios from 'axios'\r\n\r\nexport const GlobleState = createContext()\r\n\r\nexport const DataProvider = ({children})=>{\r\n   const [token,setToken] = useState(false)\r\n   \r\n   const refreshToken = async () => {\r\n     const token = await axios.get('/user/refresh_token')\r\n    setToken(token.data.accessToken)\r\n   }\r\n   useEffect(()=>{\r\n     const firstLogin = localStorage.getItem('firstLogin')\r\n     if(firstLogin)refreshToken()\r\n   },[])\r\n   const state = {\r\n     token:[token,setToken],\r\n     productsAPI:ProductsApi(),\r\n     userApi:UserApi(token)\r\n   }\r\nreturn(\r\n  <GlobleState.Provider value={state}>\r\n      {children}\r\n  </GlobleState.Provider>\r\n)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}