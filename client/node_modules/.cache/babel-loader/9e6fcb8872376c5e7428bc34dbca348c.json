{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Editor\\\\Desktop\\\\Ecommers\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import React,{useContext,useState}from'react';import{GlobleState}from'../../../GlobleState';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Category(){var state=useContext(GlobleState);var _state$token=_slicedToArray(state.token,1),token=_state$token[0];var _state$categoryApi$ca=_slicedToArray(state.categoryApi.callback,2),callback=_state$categoryApi$ca[0],setCallback=_state$categoryApi$ca[1];var _state$categoryApi$ca2=_slicedToArray(state.categoryApi.category,2),categories=_state$categoryApi$ca2[0],setCategories=_state$categoryApi$ca2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),onEdit=_useState6[0],setOnEdit=_useState6[1];var createCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,_res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!onEdit){_context.next=9;break;}_context.next=5;return axios.put(\"/api/category/\".concat(id),{name:category},{headers:{Authorization:token}});case 5:res=_context.sent;alert(res.data.msg);_context.next=13;break;case 9:_context.next=11;return axios.post(\"/api/category\",{name:category},{headers:{Authorization:token}});case 11:_res=_context.sent;alert(_res.data.msg);case 13:setId('');setCategory('');setCallback(!callback);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.msg);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function createCategory(_x){return _ref.apply(this,arguments);};}();var EditCategory=function EditCategory(name,id){setId(id);setOnEdit(true);setCategory(name);};var DeleteCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/api/category/\".concat(id),{headers:{Authorization:token}});case 3:res=_context2.sent;setCallback(!callback);alert(res.data.msg);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);alert(_context2.t0.response.data.msg);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function DeleteCategory(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"categories\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:createCategory,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"categoty\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:onEdit?\"Updata\":\"Save\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:category.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return EditCategory(category.name,category._id);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return DeleteCategory(category._id);},children:\"Delete\"})]})]},category._id);})})]});}","map":{"version":3,"sources":["C:/Users/Editor/Desktop/Ecommers/client/src/component/mainpages/categoris/Category.js"],"names":["axios","React","useContext","useState","GlobleState","Category","state","token","categoryApi","callback","setCallback","category","categories","setCategories","setCategory","id","setId","onEdit","setOnEdit","createCategory","e","preventDefault","put","name","headers","Authorization","res","alert","data","msg","post","response","EditCategory","DeleteCategory","delete","target","value","map","_id"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport React, { useContext, useState } from 'react'\r\nimport { GlobleState } from '../../../GlobleState'\r\nexport default function Category() {\r\nconst state = useContext(GlobleState)\r\nconst [token] = state.token\r\nconst [callback,setCallback] = state.categoryApi.callback\r\nconst [categories,setCategories] = state.categoryApi.category\r\nconst [category,setCategory] = useState('')\r\nconst [id,setId] = useState('')\r\nconst [onEdit,setOnEdit] = useState(false)\r\n\r\n\r\n\r\n\r\nconst createCategory = async (e) => {\r\n  e.preventDefault();\r\n  try {\r\n   if(onEdit){\r\n    const res = await axios.put(`/api/category/${id}`,{name:category},{\r\n      headers:{Authorization:token}\r\n      \r\n    })\r\n    alert(res.data.msg)\r\n    \r\n   }else{\r\n    const res = await axios.post(\"/api/category\",{name:category},{\r\n      headers:{Authorization:token}\r\n    })\r\n    alert(res.data.msg)\r\n   \r\n   }\r\n   setId('')\r\n   setCategory('')\r\n   setCallback(!callback)\r\n  } catch (err) {\r\n    alert(err.response.data.msg)\r\n  }\r\n}\r\nconst EditCategory = (name,id) =>{\r\n  setId(id)\r\n  setOnEdit(true)\r\n  setCategory(name)\r\n}\r\nconst DeleteCategory = async(id) =>{\r\n  try{\r\nconst res = await axios.delete(`/api/category/${id}`,{\r\n  headers:{Authorization:token}\r\n})\r\n  \r\n   setCallback(!callback)\r\n   alert(res.data.msg)\r\n  }catch(err){\r\n    alert(err.response.data.msg)\r\n  }\r\n}\r\n  return (\r\n    <div className='categories'>\r\n      <form onSubmit={createCategory}>\r\n        <label htmlFor='category'>Category</label>\r\n        <input type='text' name=\"categoty\" value={category}\r\n        onChange={ e =>setCategory(e.target.value)}  />\r\n        <button type='submit'>{onEdit?\"Updata\":\"Save\"}</button>\r\n      </form>\r\n\r\n      <div className='col'>\r\n        {\r\n          categories.map(category =>(\r\n            <div className='row' key={category._id}>\r\n              <p>{category.name}</p>\r\n              <div>\r\n                <button onClick={()=>EditCategory(category.name,category._id)}>Edit</button>\r\n                <button onClick={()=>DeleteCategory(category._id)}>Delete</button>\r\n              </div>\r\n\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}